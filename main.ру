import os
import asyncio
from telethon import TelegramClient, events
from telethon.sessions import StringSession

# –¢–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
API_ID = 30893125
API_HASH = '5c73de68f3152f0513292cb495071e0b'
# –ë–µ—Ä–µ–º —Ç—É —Å–∞–º—É—é —Å—Ç—Ä–æ–∫—É –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö Render
SESSION_STR = os.environ.get('TELEGRAM_STRING_SESSION')

# –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –∏—Å–ø–æ–ª—å–∑—É–µ–º StringSession(SESSION_STR)
client = TelegramClient(StringSession(SESSION_STR), API_ID, API_HASH)

@client.on(events.NewMessage)
async def handler(event):
    text = event.raw_text.lower()
    # –°–ª–æ–≤–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∑–∞–∫–∞–∑–æ–≤
    if any(word in text for word in ['–Ω—É–∂–µ–Ω', '–∑–∞–∫–∞–∑', '–¥–∏–∑–∞–π–Ω', '–ª–æ–≥–æ—Ç–∏–ø', '—Å–∞–π—Ç']):
        await client.send_message('me', f"üí∞ **–ù–æ–≤—ã–π –∑–∞–∫–∞–∑!**\n\n{event.raw_text}")

async def main():
    # start() –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –Ω–µ –±—É–¥–µ—Ç –ø—Ä–æ—Å–∏—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω, –µ—Å–ª–∏ —Å–µ—Å—Å–∏—è –≤–µ—Ä–Ω–∞
    await client.start()
    print("üöÄ –ë–û–¢ –ó–ê–ü–£–©–ï–ù! –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò–î–ï–¢...")
    await client.run_until_disconnected()

if __name__ == '__main__':
    asyncio.run(main())
